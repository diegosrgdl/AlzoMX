<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset='utf-8' />
  <meta name='viewport' content='width=device-width, initial-scale=1' />
  <title>AlzoMX 1.0.3 | Monitor de riesgos</title>
  <link rel="apple-touch-icon" href="https://i.ibb.co/Df9zt21/iOSic.jpg">
  <link rel="icon" type="image/png" href="https://i.ibb.co/6mKTgNw/alzo-App-Logo.png">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css' rel='stylesheet' />
  <script src='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js'></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
    }

    #map {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 100%;
    }

    .container {
      /*Configuracion importante NO BORRAR*/
      display: flex;
      justify-content: center;
      align-items: center;
      height: max-content;
      /*Configuracion importante NO BORRAR*/
      position: absolute;
      margin: 20px;
      padding: 20px;
      right: 1%;
      margin-left: 50px;
      border-radius: 10px;
      overflow-y: scroll;
      background-color: rgba(34, 34, 34, 0.4);
      -webkit-backdrop-filter: blur(3px);
      -moz-backdrop-filter: blur(3px);
      -ms-backdrop-filter: blur(3px);
      backdrop-filter: blur(3px);
      color: rgb(131, 131, 131);

    }

    .image {

      margin-left: 6px;
    }

    #markerpopocatepetl {
      background-image: url('https://i.ibb.co/bQwv6s2/descarga.gif');
      background-size: cover;
      width: 35px;
      height: 35px;
    }
  </style>
</head>

<body>

  <div id="map"></div>
  <!-- Create a container for the instructions and directions -->

  <div style="height: max-content; ">



    <div class="container">
      <span dir="auto" id="AlzoEartquakeDATA">Haga clic en un evento para ver sus datos</span>
      <img src="https://raw.githubusercontent.com/AlzoMX/AlzoMX/main/Web/Resources/alzo_noload_app.png" alt="Imagen"
        class="image" id="earthqukesimagenes" width="30px" height="30px">
    </div>












    <script>


      mapboxgl.accessToken = 'pk.eyJ1IjoiYWx6b2FsZXJ0YXNpc21pY2EiLCJhIjoiY2wyNHM2c25vMjNoejNpcWRrb3Y4MzV6ciJ9.D2pXLxF0emuIHvrW-n181Q';
      const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/dark-v11',
        center: [-99.1304, 19.4730],
        zoom: 5.4,
        attributionControl: false
      })

        .addControl(new mapboxgl.AttributionControl({
          customAttribution: 'AlzoMX'
        }));



      const e4l = document.createElement('div');
      e4l.id = 'markerpopocatepetl';
      new mapboxgl.Marker(e4l)
        .setLngLat([-103.6170, 19.5121])
        .addTo(map);


      const e2l = document.createElement('div');
      e2l.id = 'markerpopocatepetl';
      new mapboxgl.Marker(e2l)
        .setLngLat([-98.6274, 19.0226])
        .addTo(map);

      const e223l = document.createElement('div');
      e223l.id = 'markerpopocatepetl';
      new mapboxgl.Marker(e223l)
        .setLngLat([-90.8808, 14.4743])
        .addTo(map);




      map.on('style.load', () => {

        map.addSource('earthquakes', {

          // Ejemplo de Busqueda con +M5 https://earthquake.usgs.gov/fdsnws/event/1/query?format=geojson&starttime=1985-09-07&endtime=1985-09-20&minmagnitude=5
          //Default USGS API Web Services https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_month.geojson
          type: 'geojson',
          data: 'https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_month.geojson'
        });

        map.addSource('AlzoMXAPI', {

          type: 'geojson',
          data: 'https://raw.githubusercontent.com/AlzoMX/AlzoMX/main/AlzoMXAPI'
        });


        map.addSource('plates', {


          type: 'geojson',
          data: 'https://raw.githubusercontent.com/AlzoMX/AlzoMX/main/plates.json'
        });


        map.addLayer({

          'id': 'alzoMX-layer',
          'type': 'circle',
          'source': 'AlzoMXAPI',
          'paint': {

            "circle-opacity": 0.5,
            'circle-radius': {
              'property': 'mag',
              'stops': [
                [0, 8],
                [1, 8],
                [2, 8],
                [3, 8],
                [4, 9],
                [5, 15],
                [6, 18],
                [7, 45],
                [8, 40],
                [9, 70],
                [10, 70],
              ]
            },

            'circle-color': {
              'property': 'mag',
              'stops': [
                [0, '#5AB8A6'],
                [1, '#5AB8A6'],
                [2, '#5AB8A6'],
                [3, '#5AB8A6'],
                [4, '#22BF57'],
                [5, '#FCA217'],
                [6, '#FC6D17'],
                [7, '#F02B00'],
                [8, '#BC2DFA'],
                [9, '#BC2DFA'],
                [10, '#BC2DFA'],
              ]
            },
          }
        });


        map.addLayer({

          'id': 'earthquakes-layer',
          'type': 'circle',
          'source': 'earthquakes',
          'paint': {

            "circle-opacity": 0.5,
            'circle-radius': {
              'property': 'mag',
              'stops': [
                /*[0, 8],
                [1, 8],
                [2, 8],
                [3, 8],*/
                [4, 9],
                [5, 15],
                [6, 18],
                [7, 45],
                [8, 40],
                [9, 70],
                [10, 70],
              ]
            },

            'circle-color': {
              'property': 'mag',
              'stops': [
                /*[0, '#5AB8A6'],
                [1, '#5AB8A6'],
                [2, '#5AB8A6'],
                [3, '#5AB8A6'],*/
                [4, '#22BF57'],
                [5, '#FCA217'],
                [6, '#FC6D17'],
                [7, '#F02B00'],
                [8, '#BC2DFA'],
                [9, '#BC2DFA'],
                [10, '#BC2DFA'],
              ]
            },
          }
        });



        map.addLayer({
          'id': 'plates',
          'type': 'line',
          'source': 'plates',
          'layout': {
            'line-join': 'round',
            'line-cap': 'round'
          },
          'paint': {
            'line-color': '#FF9F33',
            'line-width': 4
          }
        });

      });



      map.on('click', 'earthquakes-layer', (e) => {


        var magitude = e.features[0].properties.mag;
        var magType = e.features[0].properties.magType;
        var place = e.features[0].properties.place;
        var times = e.features[0].properties.time;
        var latlong = e.features[0].properties.coordinates;

        var date = new Date(times);

        var Year = date.getFullYear();
        var Month = date.getMonth() + 1;
        var Today = date.getDate();
        const Hours = String(date.getHours()).padStart(2, '0');
        const Minutes = String(date.getMinutes()).padStart(2, '0');
        const seconds = String(date.getSeconds()).padStart(2, '0');





        document.getElementById('AlzoEartquakeDATA').innerText = "Este evento tuvo una magnitud de: " + magitude + " ubicado en: " + place + ' el ' + Today + '/' + Month + '/' + Year + ' a las ' + Hours + ':' + Minutes + ':' + seconds + " por USGS"


        if (magitude > 0.0) {
          document.getElementById('earthqukesimagenes').src = 'https://raw.githubusercontent.com/AlzoMX/AlzoMX/main/Web/Resources/alzo_noload_app.png'
        }

        if (magitude > 3.9) {
          document.getElementById('earthqukesimagenes').src = 'https://raw.githubusercontent.com/AlzoMX/AlzoMX/main/Web/Resources/alzo_weak_app.png'
        }

        if (magitude > 4.9) {
          document.getElementById('earthqukesimagenes').src = 'https://raw.githubusercontent.com/AlzoMX/AlzoMX/main/Web/Resources/alzo_moderate_app.png'
        }

        if (magitude > 6.0) {
          document.getElementById('earthqukesimagenes').src = 'https://raw.githubusercontent.com/AlzoMX/AlzoMX/main/Web/Resources/alzo_strong_app.png'
        }




        const chapters = {
          'Earthquake': {
            center: e.lngLat,
            zoom: 5.4
          }
        }
        map.flyTo(chapters['Earthquake']);


      });












      map.on('click', 'alzoMX-layer', (e) => {


        var magitude = e.features[0].properties.mag;
        var magType = e.features[0].properties.magType;
        var place = e.features[0].properties.place;
        var times = e.features[0].properties.time;
        var latlong = e.features[0].properties.coordinates;

        var date = new Date(times);

        var Year = date.getFullYear();
        var Month = date.getMonth() + 1;
        var Today = date.getDate();
        const Hours = String(date.getHours()).padStart(2, '0');
        const Minutes = String(date.getMinutes()).padStart(2, '0');
        const seconds = String(date.getSeconds()).padStart(2, '0');





        document.getElementById('AlzoEartquakeDATA').innerText = "Este evento tuvo una magnitud de: " + magitude + " ubicado en: " + place + ' el ' + Today + '/' + Month + '/' + Year + ' a las ' + Hours + ':' + Minutes + ':' + seconds + " por AlzoMX"


        if (magitude > 0.0) {
          document.getElementById('earthqukesimagenes').src = 'https://raw.githubusercontent.com/AlzoMX/AlzoMX/main/Web/Resources/alzo_noload_app.png'
        }

        if (magitude > 3.9) {
          document.getElementById('earthqukesimagenes').src = 'https://raw.githubusercontent.com/AlzoMX/AlzoMX/main/Web/Resources/alzo_weak_app.png'
        }

        if (magitude > 4.9) {
          document.getElementById('earthqukesimagenes').src = 'https://raw.githubusercontent.com/AlzoMX/AlzoMX/main/Web/Resources/alzo_moderate_app.png'
        }

        if (magitude > 6.0) {
          document.getElementById('earthqukesimagenes').src = 'https://raw.githubusercontent.com/AlzoMX/AlzoMX/main/Web/Resources/alzo_strong_app.png'
        }




        const chapters = {
          'Earthquake': {
            center: e.lngLat,
            zoom: 5.4
          }
        }
        map.flyTo(chapters['Earthquake']);


      });



    </script>




</body>

</html>
